{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nlet SingupComponent = class SingupComponent {\n  constructor(Service, router, formBuilder) {\n    this.Service = Service;\n    this.router = router;\n    this.formBuilder = formBuilder;\n  }\n  myCustomValidator(control) {\n    const EMAIL_REGEXP = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    // Check if the email is valid using the regular expression\n    const isValid = EMAIL_REGEXP.test(control.value);\n    // Return an object with the error code and message if the email is invalid\n    return isValid ? null : {\n      'invalidEmail': true\n    };\n  }\n  register(f) {\n    let data = f.value;\n    data.Etat = \"Non vérifié\";\n    this.Service.register(data).subscribe(data => {\n      if (data) {\n        this.router.navigate(['/login']).then(() => {\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'compte créé avec succès',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        });\n      } else {\n        console.log('Registration failed');\n      }\n    }, err => {\n      console.log(err);\n      this.msg = err.error.msg;\n    });\n  }\n  ngOnInit() {\n    this.myForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email, this.myCustomValidator]],\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(8), Validators.pattern('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]+$')]],\n      passwordVerification: ['', Validators.required]\n    }, {\n      validator: this.matchingPasswords('password', 'passwordVerification')\n      // other form fields...\n    });\n  }\n\n  matchingPasswords(passwordKey, confirmPasswordKey) {\n    return group => {\n      const password = group.controls[passwordKey];\n      const confirmPassword = group.controls[confirmPasswordKey];\n      // If both fields are empty, they are not considered matching\n      if (!password.value && !confirmPassword.value) {\n        return confirmPassword.setErrors({\n          emptyPasswords: true\n        });\n      }\n      if (password.value !== confirmPassword.value) {\n        return confirmPassword.setErrors({\n          mismatchedPasswords: true\n        });\n      } else {\n        return confirmPassword.setErrors(null);\n      }\n    };\n  }\n};\nSingupComponent = __decorate([Component({\n  selector: 'app-singup',\n  templateUrl: './singup.component.html',\n  styleUrls: ['./singup.component.css']\n})], SingupComponent);\nexport { SingupComponent };","map":{"version":3,"mappings":"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","names":["Component","Validators","Swal","SingupComponent","constructor","Service","router","formBuilder","myCustomValidator","control","EMAIL_REGEXP","isValid","test","value","register","f","data","Etat","subscribe","navigate","then","fire","position","icon","title","showConfirmButton","timer","console","log","err","msg","error","ngOnInit","myForm","group","email","required","firstName","lastName","password","minLength","pattern","passwordVerification","validator","matchingPasswords","passwordKey","confirmPasswordKey","controls","confirmPassword","setErrors","emptyPasswords","mismatchedPasswords","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Eyakr\\Info\\front\\src\\app\\views\\singup\\singup\\singup.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { UserService } from 'ngx-tetris/src/lib/services/user.service';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-singup',\n  templateUrl: './singup.component.html',\n  styleUrls: ['./singup.component.css']\n})\nexport class SingupComponent implements OnInit {\n  myForm: any;\n\n  msg:any\n  f: any;\nconstructor( private Service:UserService,private router:Router ,private formBuilder: FormBuilder){}\n  \n\nmyCustomValidator(control: FormControl): { [key: string]: boolean } | null {\n  const EMAIL_REGEXP = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\n  // Check if the email is valid using the regular expression\n  const isValid = EMAIL_REGEXP.test(control.value);\n\n  // Return an object with the error code and message if the email is invalid\n  return isValid ? null : { 'invalidEmail': true };}\n\n\n  register(f:any){\n    let data=f.value\n    data.Etat=\"Non vérifié\"\n    this.Service.register(data).subscribe(data=>{\n      if(data){\n        this.router.navigate(['/login']).then(()=>{\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'compte créé avec succès',\n            showConfirmButton: false,\n            timer: 1500\n          })\n        })\n      } else {\n        console.log('Registration failed');\n      }\n    }, err => {\n      console.log(err);\n      this.msg = err.error.msg;\n    });\n  }\n  ngOnInit(): void { \n    this.myForm = this.formBuilder.group({\n\n      email: ['', [Validators.required, Validators.email,this.myCustomValidator]],\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(8), Validators.pattern('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]+$')]],   \n      passwordVerification: ['', Validators.required]},\n       \n      {\n      validator: this.matchingPasswords('password', 'passwordVerification')\n        // other form fields...\n    });\n  }\n\n  matchingPasswords(passwordKey: string, confirmPasswordKey: string) {\n    return (group: FormGroup) => {\n      const password = group.controls[passwordKey];\n      const confirmPassword = group.controls[confirmPasswordKey];\n  \n      // If both fields are empty, they are not considered matching\n      if (!password.value && !confirmPassword.value) {\n        return confirmPassword.setErrors({ emptyPasswords: true });\n      }\n  \n      if (password.value !== confirmPassword.value) {\n        return confirmPassword.setErrors({ mismatchedPasswords: true });\n      } else {\n        return confirmPassword.setErrors(null);\n      }\n    };\n  }\n\n\n}\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}